{% extends "base.html" %}{% block title %}Cars{% endblock %}{% block content %}
<h1>Cars</h1>
<form class="toolbar" method="get">
  <input name="q" value="{{ q }}" placeholder="Search brand/title/plate">
  <select name="status">
    <option value="">All</option>
    <option value="available" {% if status == "available" %}selected{% endif %}>Available</option>
    <option value="maintenance" {% if status == "maintenance" %}selected{% endif %}>Maintenance</option>
  </select>
  <button class="btn" type="submit">Filter</button>
  <a class="btn primary" href="{% url 'car_create' %}">Add car</a>
</form>

<div class="grid">
{% for c in cars %}
  <div class="card">
    {% if c.image_url %}<img class="thumb" src="{{ c.image_url }}" alt="car">{% endif %}
    <h3>{{ c.brand }} {{ c.title }} ({{ c.model_year }})</h3>
    <p><span class="tag">{{ c.get_status_display }}</span></p>
    <p><b>{{ c.daily_price }} JOD / day</b></p>
    <p>
      <a class="btn" href="{% url 'car_detail' c.pk %}">Details</a>
      <a class="btn" href="{% url 'car_update' c.pk %}">Edit</a>
      <a class="btn danger" href="{% url 'car_delete' c.pk %}">Delete</a>
    </p>
  </div>
{% empty %}<p>No cars.</p>{% endfor %}
</div>

<div class="toolbar">
  {% if cars.has_previous %}<a class="btn" href="?q={{ q }}&status={{ status }}&page={{ cars.previous_page_number }}">Prev</a>{% endif %}
  <span>Page {{ cars.number }} / {{ cars.paginator.num_pages }}</span>
  {% if cars.has_next %}<a class="btn" href="?q={{ q }}&status={{ status }}&page={{ cars.next_page_number }}">Next</a>{% endif %}
</div>
{% endblock %}
